{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "![](https://raw.githubusercontent.com/dssg/aequitas/master/src/aequitas_cli/utils/img/aequitas_report_header.png)\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "An open source bias audit toolkit for machine learning developers, analysts, and  policymakers to audit machine learning models for discrimination and bias, and make informed and equitable decisions around developing and deploying predictive risk-assessment tools.\n",
    "\n",
    "[Learn more about the project](http://dsapp.uchicago.edu/aequitas/)\n",
    "\n",
    "[Try it now](http://aequitas.dssg.io)\n",
    "\n",
    "aequitas is compatible with: __Python 3.6__."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# 30 seconds to *aequitas-report*: \n",
    "\n",
    "With aequitas-report uncovering bias is as simple as running a single command on a csv.\n",
    "\n",
    "\n",
    "## Input machine learning predictions\n",
    "\n",
    "After [installing on your computer](./installation.html)\n",
    "\n",
    "Run `aequitas-report` on [COMPAS data](https://github.com/dssg/aequitas/tree/master/examples): \n",
    "```\n",
    "aequitas-report --input compas_for_aequitas.csv\n",
    "```\n",
    "\n",
    "\n",
    "| score     | label_value| race | sex | age_cat |\n",
    "| --------- |------------| -----| --- | ------- |\n",
    "|   0       | 1          | African-American | Male | 25 - 45 |\n",
    "|   1       | 1          | Native American | Female | Less than 25 |\n",
    "\n",
    "The input data at least has:\n",
    "\n",
    "- `score`\n",
    "- `label_value`\n",
    "- at least one attribute e.g. `race`, `sex` and `age_cat`.\n",
    "\n",
    "[Getting started with input data](./input_data.html) \n",
    "\n",
    "Additionally, disparity is always defined in relation to a reference group. By default, Aequitas uses majority as the reference. [Defining a reference group](./config.html)\n",
    "\n",
    "\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Get out measures of bias that you can tailor to your problem\n",
    "\n",
    "### The Bias Report output\n",
    "\n",
    "The Bias Report produces a pdf that returns descriptive interpretation of the results along with three sets of tables. \n",
    "\n",
    "* Fairness Measures Results\n",
    "* Bias Metrics Results\n",
    "* Group Metrics Results\n",
    "\n",
    "Additionally, a csv is produced that contains the relevant data. More information about output [here](./output_data.html).\n",
    "\n",
    "### Commandline output\n",
    "\n",
    "In the command line you will see The Bias Report, which returns counts for each attribute by group and then computes various fairness metrics. This is the same information that is captured in the csv output. \n",
    "\n",
    "\n",
    "```\n",
    "  _______ _            ____                _____                       _\n",
    " |__   __| |          |  _ \\              |  __ \\                     | |\n",
    "    | |  | |__   ___  | |_) |_  __ _ ___  | |__) |___ _ __   ___  _ __| |_\n",
    "    | |  | '_ \\ / _ \\ |  _ <| |/ _` / __| |  _  // _ \\ '_ \\ / _ \\| '__| __|\n",
    "    | |  | | | |  __/ | |_) | | (_| \\__ \\ | | \\ \\  __/ |_) | (_) | |  | |_\n",
    "    |_|  |_| |_|\\___| |____/|_|\\__,_|___/ |_|  \\_\\___| .__/ \\___/|_|   \\__|\n",
    "                                                     | |\n",
    "                                                     |_|\n",
    "\n",
    "____________________________________________________________________________\n",
    "\n",
    "                    Bias and Fairness Analysis\n",
    "\n",
    "\n",
    "\n",
    "Welcome to Aequitas-Audit\n",
    "Fairness measures requested: Statistical Parity,Impact Parity,FDR Parity,FPR Parity,FNR Parity,FOR Parity\n",
    "model_id, score_thresholds 1 {'rank_abs': [3317]}\n",
    "COUNTS::: race\n",
    "African-American    3696\n",
    "Asian                 32\n",
    "Caucasian           2454\n",
    "Hispanic             637\n",
    "Native American       18\n",
    "Other                377\n",
    "dtype: int64\n",
    "COUNTS::: sex\n",
    "Female    1395\n",
    "Male      5819\n",
    "dtype: int64\n",
    "COUNTS::: age_cat\n",
    "25 - 45            4109\n",
    "Greater than 45    1576\n",
    "Less than 25       1529\n",
    "dtype: int64\n",
    "audit: df shape from the crosstabs: (11, 26)\n",
    "get_disparity_major_group()\n",
    "number of rows after bias majority ref group: 11\n",
    "Any NaN?:  False\n",
    "bias_df shape: (11, 38)\n",
    "Fairness Threshold: 0.8\n",
    "Fairness Measures: ['Statistical Parity', 'Impact Parity', 'FDR Parity', 'FPR Parity', 'FNR Parity', 'FOR Parity']\n",
    "\n",
    "... \n",
    "```"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.6.4"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
